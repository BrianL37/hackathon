<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TO-DO List with Calendar</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
      }
      #todo-container {
        margin: 20px;
      }
      #header {
        text-align: center;
      }
      .in-progress { color: orange; }
      .completed { color: green; text-decoration: line-through; }

      /* Calendar styling */
      #calendar {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 20px;
      }
      .calendar-header {
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-bottom: 10px;
      }
      .calendar-header button {
        padding: 10px;
        cursor: pointer;
      }
      .month-name {
        font-size: 1.5em;
      }
      .days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-gap: 5px; 
        width: 50%;
        margin-top: 20px;
      }
      .day {
    padding: 5px; /* Adjust padding for better spacing */
    cursor: pointer;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 5px; /* Slightly rounded corners */
    width: 60px; /* Fixed width for rectangular shape */
    height: 60px; /* Fixed height for rectangular shape */
    display: flex;
    justify-content: flex-start; /* Align text horizontally to the left */
    align-items: flex-start; /* Align text vertically to the top */
    text-align: left; /* Ensure text alignment is left */
    box-sizing: border-box; /* Include padding and border in width/height */
  }
      .day:hover {
        background-color: #f0f0f0;
      }
      .task-input {
        margin-top: 20px;
        padding: 5px;
        font-size: 1em;
      }
      .task-list {
        margin-top: 10px;
        padding: 0;
        list-style: none;
      }
      .task {
        background-color: #e0e0e0;
        margin: 5px;
        padding: 5px;
        border-radius: 5px;
      }

      /* To-do list styling */
      #todo-form {
        margin: 10px;
        text-align: center;
      }
      #todo-form input {
        padding: 5px;
        font-size: 1em;
      }
      .task-counters {
        margin-top: 10px;
        border-style: inset;
      }
    </style>
  </head>
  <body>
    <div id="todo-container">
      <div id="header"><h1>To Do List</h1></div>
      <div id="todo-form">
        <input type="text" id="input-box" placeholder="Add Task" />
        <input type="date" id="date-box" />
        <button id="input-button" onclick="addTask()">Add Task</button>
      </div>
      <h2>Task List</h2>
      <ul id="list-container"></ul>
      <div class="counter-container">
        <div id="task-counters">
          In Progress: <span id="progress-counter">0</span> | Completed: <span id="completed-counter">0</span> | Uncompleted: <span id="uncompleted-counter">0</span>
        </div>
      </div>
    </div>

    <!-- Calendar Section -->
    <div id="calendar">
      <div class="calendar-header">
        <button onclick="changeMonth(-1)">&#8249;</button>
        <div class="month-name" id="month-name"></div>
        <button onclick="changeMonth(1)">&#8250;</button>
      </div>
      <div class="days" id="days"></div>
      <input type="text" id="task-input" class="task-input" placeholder="Add task for selected day" />
      <ul id="task-list" class="task-list"></ul>
    </div>

    <script>
      // To-do list variables
      const inputBox = document.getElementById("input-box");
      const dateBox = document.getElementById("date-box");
      const listContainer = document.getElementById("list-container");
      const progressCounter = document.getElementById("progress-counter");
      const completedCounter = document.getElementById("completed-counter");
      const uncompletedCounter = document.getElementById("uncompleted-counter");

      function updateCounters() {
        const tasks = listContainer.querySelectorAll("li");
        const inProgressTasks = listContainer.querySelectorAll(".in-progress");
        const completedTasks = listContainer.querySelectorAll(".completed");
        progressCounter.textContent = inProgressTasks.length;
        completedCounter.textContent = completedTasks.length;
        uncompletedCounter.textContent = tasks.length - inProgressTasks.length - completedTasks.length;
      }

      function addTask() {
        const task = inputBox.value.trim();
        const dueDate = dateBox.value;
        if (!task || !dueDate) {
          alert("Please write down a task and select a date");
          return;
        }
        const li = document.createElement("li");
        li.innerHTML = `
          <span class="task-text" onclick="toggleStatus(this)">${task} (Due: ${dueDate})</span>
          <span class="edit-btn" onclick="editTask(this)">Edit</span>
          <span class="delete-btn" onclick="deleteTask(this)">Delete</span>
        `;
        listContainer.appendChild(li);
        inputBox.value = "";
        dateBox.value = "";
        updateCounters();
      }

      function toggleStatus(taskText) {
        if (!taskText.classList.contains("in-progress") && !taskText.classList.contains("completed")) {
          taskText.classList.add("in-progress");
        } else if (taskText.classList.contains("in-progress")) {
          taskText.classList.remove("in-progress");
          taskText.classList.add("completed");
        } else {
          taskText.classList.remove("completed");
        }
        updateCounters();
      }

      function editTask(editButton) {
        const taskItem = editButton.parentElement;
        const taskText = taskItem.querySelector(".task-text").textContent.split(" (Due:")[0];
        const newTask = prompt("Edit your task:", taskText);
        if (newTask !== null) {
          taskItem.querySelector(".task-text").textContent = newTask.trim();
        }
      }

      function deleteTask(deleteButton) {
        const taskItem = deleteButton.parentElement;
        listContainer.removeChild(taskItem);
        updateCounters();
      }

      // Calendar section variables
      const daysElement = document.getElementById('days');
      const monthNameElement = document.getElementById('month-name');
      const taskInput = document.getElementById('task-input');
      const taskList = document.getElementById('task-list');

      let currentDate = new Date();

      function changeMonth(direction) {
        currentDate.setMonth(currentDate.getMonth() + direction);
        renderCalendar();
      }

      function renderCalendar() {
        const month = currentDate.getMonth();
        const year = currentDate.getFullYear();
        const firstDayOfMonth = new Date(year, month, 1);
        const lastDayOfMonth = new Date(year, month + 1, 0);
        const daysInMonth = lastDayOfMonth.getDate();

        monthNameElement.innerText = `${firstDayOfMonth.toLocaleString('default', { month: 'long' })} ${year}`;
        daysElement.innerHTML = '';

        for (let i = 1; i <= daysInMonth; i++) {
          const dayElement = document.createElement('div');
          dayElement.classList.add('day');
          dayElement.innerText = i;

          dayElement.onclick = function () {
            const selectedDate = new Date(year, month, i);
            addTaskForDay(selectedDate);
          };

          daysElement.appendChild(dayElement);
        }
      }

      function addTaskForDay(date) {
        const task = taskInput.value.trim();
        if (task) {
          const taskElement = document.createElement('li');
          taskElement.classList.add('task');
          taskElement.innerText = `${task} (Due: ${date.toLocaleDateString()})`;
          taskList.appendChild(taskElement);
          taskInput.value = '';
        }
      }

      renderCalendar();
    </script>
  </body>
</html>
